<app-background [dark]="dark"></app-background>
<div class="px-5 min-h-screen flex justify-content-center align-items-center">
  <div class="border-1 surface-border surface-card border-round py-7 px-4 md:px-7 z-1">
    <div class="mb-4">
      <div class="text-900 text-xl font-bold mb-2">Register</div>
      <span class="text-600 font-medium">Let's get started</span>
    </div>

    <form [formGroup]="form" (ngSubmit)="signupUser()">
      <div class="flex flex-column mb-4">
        <span class="p-input-icon-left w-full mb-2">
          <i class="pi pi-envelope"></i>
          <input formControlName="email"
                 id="email"
                 placeholder="Email"
                 type="text"
                 pInputText
                 class="w-full md:w-25rem"/>
          </span>
        @if (fieldHasError('email')) {
          <div class="mb-2 ng-invalid p-error">{{ getFieldErrorMessage('email') }}</div>
        }
      </div>

      <div class="flex flex-column mb-4">
          <span class="p-input-icon-left w-full mb-2">
            <i class="pi pi-lock z-2"></i>
            <p-password formControlName="password"
                        id="password"
                        placeholder="Password"
                        [toggleMask]="true"
                        inputStyleClass="w-full md:w-25rem"
                        [inputStyle]="{paddingLeft: '2.5rem'}">
            </p-password>
          </span>
        @if (fieldHasError('password')) {
          <div class="mb-2 ng-invalid p-error">{{ getFieldErrorMessage('password') }}</div>
        }
      </div>

      <div class="flex flex-column mb-4">
          <span class="p-input-icon-left w-full mb-2">
            <i class="pi pi-lock z-2"></i>
            <p-password formControlName="confirmPassword"
                        id="confirmPassword"
                        placeholder="Confirm Password"
                        [toggleMask]="true"
                        inputStyleClass="w-full md:w-25rem"
                        [inputStyle]="{paddingLeft: '2.5rem'}">
            </p-password>
          </span>
        @if (fieldHasError('confirmPassword')) {
          <div class="mb-2 ng-invalid p-error">{{ getFieldErrorMessage('confirmPassword') }}</div>
        } @else if (form.getError("mismatch")) {
          <div class="mb-2 ng-invalid p-error">Passwords do not match</div>
        }
      </div>
      <div class="flex flex-column mb-4">
        <p-dropdown formControlName="role"
                    [options]="role"
                    placeholder="Select a role"
                    [showClear]="true"
                    styleClass="w-full md:w-25rem mb-2">
        </p-dropdown>
        @if (fieldHasError('role')) {
          <div class="mb-2 ng-invalid p-error">{{ getFieldErrorMessage('role') }}</div>
        }
      </div>

      <div class="mb-4 flex flex-wrap">
        <p-checkbox id="confirm-check-box" [binary]="true" name="checkbox" styleClass="mr-2" value="val"></p-checkbox>
        <label class="text-900 font-medium mr-2" for="confirm-check-box">I have read the</label>
        <a class="text-600 cursor-pointer hover:text-primary cursor-pointer">Terms and Conditions</a>
      </div>
      <button type="submit" class="w-full mb-4" label="Sign Up" pButton pRipple></button>
    </form>

    <span class="font-medium text-600">Already have an account?
        <a class="font-semibold cursor-pointer text-900 hover:text-primary transition-colors transition-duration-300" routerLink="/auth/login">Login</a>
      </span>
  </div>
</div>
