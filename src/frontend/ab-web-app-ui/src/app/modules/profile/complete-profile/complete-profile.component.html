<div class="col-12">
  <div class="card">
    <h5>Complete profile</h5>
    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
      <div class="p-fluid p-formgrid grid">
        <div class="field col-12 md:col-6">
          <label for="firstname">Firstname</label>
          <input
            pInputText
            id="firstname"
            type="text"
            formControlName="firstName"
            [ngClass]="{'ng-dirty ng-invalid': isFieldInvalid('firstName')}"
          />
          @if (isFieldInvalid("firstName")) {
            <div class="mb-2 ng-invalid p-error">first name is required</div>
          }
        </div>
        <div class="field col-12 md:col-6">
          <label for="lastname">Lastname</label>
          <input
            pInputText
            id="lastname"
            type="text"
            formControlName="lastName"
            [ngClass]="{'ng-dirty ng-invalid': isFieldInvalid('lastName')}"
          />
          @if (isFieldInvalid("firstName")) {
            <div class="mb-2 ng-invalid p-error">Last name is required</div>
          }
        </div>
        <div class="field col-12">
          <label for="email">Email</label>
          <input
            pInputText
            id="email"
            type="text"
            formControlName="email"

          />
        </div>

        <div class="field col-12">
          <label for="role">Select Role</label>
          <p-dropdown
            [options]="roles"
            formControlName="role"
            id="role"
          ></p-dropdown>
          @if (isFieldInvalid("role")) {
            <div class="mb-2 ng-invalid p-error">Role is required</div>
          }
        </div>
        @if (!sessionDto) {
          @if (selectedRole === RoleName.TEACHER) {
            <div class="field col-12">
              <label for="subject">Subject</label>
              <p-multiSelect
                id="subject"
                formControlName="subjects"
                placeholder="Choose a subject"
                [options]="subjects"
                optionLabel="label"
                optionValue="value"
                dataKey="id"

              ></p-multiSelect>
              @if (isFieldInvalid('subject')) {
                <div class="mb-2 ng-invalid p-error">
                  Subject is required
                </div>
              }
            </div>
          }

          @if (selectedRole === RoleName.STUDENT) {
            <div class="field col-12 md:col-6">
              <label for="schoolYear">School Year</label>
              <p-dropdown
                id="schoolYear"
                formControlName="schoolYear"
                [options]="schoolYears"

              ></p-dropdown>
              @if (isFieldInvalid('schoolYear')) {
                <div class="mb-2 ng-invalid p-error">
                  School Year is required
                </div>
              }
            </div>
            <div class="field col-12 md:col-6">
              <label for="schoolType">School Type</label>
              <p-dropdown
                id="schoolType"
                formControlName="schoolType"
                [options]="schoolTypes"

              ></p-dropdown>
              @if (isFieldInvalid('schoolType')) {
                <div class="mb-2 ng-invalid p-error">
                  School Type is required
                </div>
              }
            </div>
          }
        } @else {
          <div class="field col-12 md:col-6">
            <label for="SessionSchoolYear">School Year</label>
            <p-dropdown
              id="SessionSchoolYear"
              formControlName="schoolYear"
              [options]="schoolYears"

            ></p-dropdown>
            @if (isFieldInvalid('schoolYear')) {
              <div class="mb-2 ng-invalid p-error">
                School Year is required
              </div>
            }
          </div>
          <div class="field col-12 md:col-6">
            <label for="sessionSchoolType">School Type</label>
            <p-dropdown
              id="sessionSchoolType"
              formControlName="schoolType"
              [options]="schoolTypes"
            ></p-dropdown>
            @if (isFieldInvalid('schoolType')) {
              <div class="mb-2 ng-invalid p-error">
                School Type is required
              </div>
            }
          </div>
        }

      </div>
      <button
        pButton
        type="submit"
        label="Submit"
        icon="pi pi-check"
      ></button>
    </form>
  </div>
</div>

