<div class="card">
  <full-calendar [options]="calendarOptions"></full-calendar>

  <p-dialog  [(visible)]="showDialog"  [style]="{width: '36rem'}" [modal]="true" [closable]="true" (onHide)="resetEvent()">
    <ng-template pTemplate="header">
      <span class="text-900 font-semibold text-xl">{{ title }}</span>
    </ng-template>

    <ng-template pTemplate="content">
      @if (view==="display"){} @else {
        <form [formGroup]="sessionForm">
          <div class="grid p-fluid formgrid">
            <div class="col-12 field">
              <label class="mb-2" for="teacher">teacher</label>
              <p-dropdown [filter]="true" [ngClass]="{'ng-invalid ng-dirty': fieldHasError('schoolTypes')}" [options]="teachers"
                          [showClear]="true"
                          formControlName="teacher"
                          id="teacher"
                          placeholder="choose a teacher"
                          styleClass="w-full  mb-2"
              >
              </p-dropdown>
              @if (fieldHasError('teacher')) {
                <div class="mb-2 ng-invalid p-error">teacher is required</div>
              }
            </div>

            <div class="col-12 field">
              <label class="mb-2" for="subject">subject</label>
              <p-dropdown [filter]="true" [ngClass]="{'ng-invalid ng-dirty': fieldHasError('subject')}" [options]="subjects"
                          [showClear]="true"
                          formControlName="subject"
                          id="subject"
                          placeholder="choose a subject"
                          styleClass="w-full"
                          [virtualScroll]="true"

              >
              </p-dropdown>
              @if (fieldHasError('subject')) {
                <div class="ng-invalid p-error">subject is required</div>
              }
            </div>
            <div class="col-12 field">
              <label for="startTime" class="text-900 font-semibold">Start Time</label>
              <p-calendar id="startTime" formControlName="startDateTime" [showTime]="true" placeholder="Select Start Time"></p-calendar>
              @if (fieldHasError('startTime')) {
                <div class="mb-2 ng-invalid p-error">Start Time is required</div>
              }
            </div>
          </div>
        </form>
      }
    </ng-template>

    <ng-template pTemplate="footer">
      @if (view === 'display') {
        <button pButton label="Edit" icon="pi pi-pencil" (click)="onEditClick()" class="p-button-primary" style="margin-right: .25rem"></button>
      }
      @if (view !== 'display') {
        <button pButton label="Save" icon="pi pi-check" (click)="handleSave()" class="p-button-primary"></button>
      }
    </ng-template>
  </p-dialog>
</div>
